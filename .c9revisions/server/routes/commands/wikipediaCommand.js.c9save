{"ts":1378905301749,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1378905304273,"patch":[[{"diffs":[[1,"var querystring = require('querystring'),\n    http = require('http');\n\nexports.sendNotification = function(req, res){\n\n    console.log(\"API send notification\");\n    for (var i = 0; i < req.params.length; i++) {\n        console.log(\"param = \" + req.param[i]);\n    }\n    console.log(\"Req.Body = \" + req.body.title);\n    \n    console.log(\"Text : \" + req.params.titleText);\n    console.log(\"Message : \" + req.params.messageText);\n    \n\n\n    var data = querystring.stringify({\n        'email' : 'antb59@gmail.com',\n        'notification[from_screen_name]': 'Hello',\n        'notification[message]': 'This is an example',\n        'notification[icon_url]': 'http://helena-test.antb59.c9.io/img/robot_eve.png'\n    });\n\n    var options = {\n        host: 'boxcar.io',\n        port: 80,\n        path: '/devices/providers/O89HcibBYhhqUG49ipk3/notifications',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }\n    };\n    \n    try {\n        var httpreq = http.request(options, function(res) {\n            res.setEncoding('utf8');\n            res.on('data', function (chunk) {\n                console.log(\"body: \" + chunk);\n            });\n        });\n        httpreq.write(data);\n        //httpreq.end();\n    }\n    catch(err) {\n        console.log(\"Err : \" + err.message);\n    }\n    \n};"]],"start1":0,"start2":0,"length1":0,"length2":1394}]],"length":1394,"saved":false}
{"contributors":[],"silentsave":false,"ts":1379319851272,"patch":[[{"diffs":[[0,"('http')"],[-1,""],[0,""],[1,",\n    wikipedia = require(\"wikipedia-js\")"],[0,";\n\nexpor"]],"start1":60,"start2":60,"length1":16,"length2":57},{"diffs":[[0,"    "],[-1,"for (var i = 0; i < req.params.length; i++) {\n        console.log(\"param = \" + req.param[i]);\n    }\n    console.log(\"Req.Body = \" + req.body.title);\n    \n    console.log(\"Text : \" + req.params"],[1,"console.log(req.body);\n    console.log(req.body.notification);\n    console.log(req.body.notification"],[0,".title"],[-1,"Text"],[0,");\n "]],"start1":202,"start2":202,"length1":210,"length2":114},{"diffs":[[0,"log("],[-1,"\"Message : \" + req.params.messageText);\n    "],[1,"req.body.notification.message);"],[0,"\n\n\n "]],"start1":327,"start2":327,"length1":52,"length2":39},{"diffs":[[0,"]': "],[-1,"'Hello'"],[1,"req.body.notification.title"],[0,",\n  "]],"start1":480,"start2":480,"length1":15,"length2":35},{"diffs":[[0,"]': "],[-1,"'This is an example'"],[1,"req.body.notification.message"],[0,",\n  "]],"start1":542,"start2":542,"length1":28,"length2":37},{"diffs":[[0,"p://"],[-1,"helena-test"],[1,"eve"],[0,".ant"]],"start1":615,"start2":615,"length1":19,"length2":11},{"diffs":[[0,"img/"],[-1,"robot_eve.pn"],[1,"eve_small.jp"],[0,"g'\n "]],"start1":636,"start2":636,"length1":20,"length2":20},{"diffs":[[0,"ers/"],[-1,"O89HcibBYhhqUG49ipk3"],[1,"shNKXYXvXQKdqnvh19w"],[0,"/not"]],"start1":759,"start2":759,"length1":28,"length2":27},{"diffs":[[0,"        "],[-1,"//"],[0,"httpreq."]],"start1":1240,"start2":1240,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1,"}\n    catch(err) {\n        console.log(\"Err : \" + err.message);\n    }"],[1,"    res.json({\n            status: 200,\n            message : 'Push notification sent'\n        });\n    }\n    catch(err) {\n        console.log(\"Err : \" + err.message);\n         res.json({\n            status: 500,\n            message : 'Error while sending push notification: ' + err.message\n        });"],[0,"\n    "],[1,"}"],[0,"\n};"]],"start1":1263,"start2":1263,"length1":81,"length2":314}]],"length":1577,"saved":false}
{"ts":1379319861512,"patch":[[{"diffs":[[0,"API "],[-1,"send notification"],[1,"wikipedia"],[0,"\");\n"]],"start1":177,"start2":177,"length1":25,"length2":17}]],"length":1569,"saved":false}
{"ts":1379319954532,"patch":[[{"diffs":[[0,"y);\n"],[-1,"    console.log(req.body.notification);\n    console.log(req.body.notification.title);\n    console.log(req.body.notification.message);\n\n"],[0,"\n   "]],"start1":217,"start2":217,"length1":143,"length2":8}]],"length":1434,"saved":false}
{"ts":1379319966184,"patch":[[{"diffs":[[0,"rts."],[-1,"sendNotification"],[1,"getWikipedia"],[0," = f"]],"start1":116,"start2":116,"length1":24,"length2":20}]],"length":1430,"saved":false}
{"ts":1379319983002,"patch":[[{"diffs":[[0,"ikipedia"],[1,"Resume"],[0," = funct"]],"start1":124,"start2":124,"length1":16,"length2":22}]],"length":1436,"saved":false}
{"ts":1379320295895,"patch":[[{"diffs":[[0,"edia"],[-1,"Resum"],[1,"Articl"],[0,"e = "]],"start1":128,"start2":128,"length1":13,"length2":14},{"diffs":[[0,"    "],[1," "],[0,"var "],[-1,"data = querystring.stringify({\n        'email' : 'antb59@gmail.com',\n        'notification[from_screen_name]': req.body.notification.title,\n        'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg'\n    });\n\n    var options = {\n        host: 'boxcar.io',\n        port: 80,\n        path: '/devices/providers/shNKXYXvXQKdqnvh19w/notifications',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }\n    };"],[1,"query = \"Napoleon Bonaparte\";\n"],[0,"\n   "]],"start1":225,"start2":225,"length1":616,"length2":43}]],"length":864,"saved":false}
{"ts":1379320327341,"patch":[[{"diffs":[[0,"body);\n\n    "],[-1," "],[0,"var query = "]],"start1":217,"start2":217,"length1":25,"length2":24},{"diffs":[[0,"y = "],[-1,"\"Napoleon Bonaparte\""],[1," req.body.article.title"],[0,";\n\n "]],"start1":237,"start2":237,"length1":28,"length2":31}]],"length":866,"saved":false}
{"ts":1379320429012,"patch":[[{"diffs":[[0,"eq, res)"],[-1,""],[0,""],[1," "],[0,"{\n\n    c"]],"start1":152,"start2":152,"length1":16,"length2":17},{"diffs":[[0," query ="],[-1," "],[0," req.bod"]],"start1":233,"start2":233,"length1":17,"length2":16},{"diffs":[[0,"e;\n\n    "],[1,"var options = {\n        query: query,\n        format: \"html\",\n        summaryOnly: true\n    };\n\n    wikipedia.searchArticle(options, function(err, htmlWikiText) {\n        if (err) {\n            console.log(\"An error occurred[query=%s, error=%s]\", query, err);\n            return;\n        }\n        console.log(\"Query successful[query=%s, html-formatted-wiki-text=%s]\", query, htmlWikiText);\n    });\n\n"],[0,"\n    try"]],"start1":263,"start2":263,"length1":16,"length2":416},{"diffs":[[0,"function"],[-1," "],[0,""],[1,""],[0,"(chunk) "]],"start1":806,"start2":806,"length1":17,"length2":16},{"diffs":[[0," message"],[-1," "],[0,": 'Push "]],"start1":1006,"start2":1006,"length1":17,"length2":16},{"diffs":[[0,"   catch"],[1," "],[0,"(err) {\n"]],"start1":1060,"start2":1060,"length1":16,"length2":17},{"diffs":[[0,"e);\n        "],[-1," "],[0,""],[1,""],[0,"res.json({\n "]],"start1":1118,"start2":1118,"length1":25,"length2":24},{"diffs":[[0," message"],[-1," "],[0,""],[1,""],[0,": 'Error"]],"start1":1177,"start2":1177,"length1":17,"length2":16}]],"length":1263,"saved":false}
{"ts":1379320540804,"patch":[[{"diffs":[[0,"og(\""],[-1,"An error occurred[query=%s, error=%s]\", query, err);"],[1,"Err : \" + err.message);\n            res.json({\n                status: 500,\n                body: 'Error while sending push notification: ' + err.message"],[0,"\n   "]],"start1":474,"start2":474,"length1":60,"length2":161},{"diffs":[[0,"    "],[-1,"return"],[1,"})"],[0,";\n  "]],"start1":640,"start2":640,"length1":14,"length2":10}]],"length":1360,"saved":false}
{"ts":1379320553114,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(\"Query successful[query=%s, html-formatted-wiki-text=%s]\", query,"],[1,"res.json({\n            status: 200,\n            message:"],[0," htm"]],"start1":662,"start2":662,"length1":85,"length2":64},{"diffs":[[0,"WikiText"],[1,"\n        }"],[0,");\n    }"]],"start1":727,"start2":727,"length1":16,"length2":26}]],"length":1349,"saved":false}
{"ts":1379320563281,"patch":[[{"diffs":[[0,");\n\n"],[-1,"\n    try {\n        var httpreq = http.request(options, function(res) {\n            res.setEncoding('utf8');\n            res.on('data', function(chunk) {\n                console.log(\"body: \" + chunk);\n            });\n        });\n        httpreq.write(data);\n        httpreq.end();\n        res.json({\n            status: 200,\n            message: 'Push notification sent'\n        });\n    }\n    catch (err) {\n        console.log(\"Err : \" + err.message);\n        res.json({\n            status: 500,\n            message: 'Error while sending push notification: ' + err.message\n        });\n    }\n"],[0,"};"]],"start1":753,"start2":753,"length1":596,"length2":6}]],"length":759,"saved":false}
{"ts":1379320627120,"patch":[[{"diffs":[[0,"ile "],[-1,"sending push notification"],[1,"getting wikipedia article"],[0,": ' "]],"start1":585,"start2":585,"length1":33,"length2":33}]],"length":759,"saved":false}
{"ts":1379324468026,"patch":[[{"diffs":[[0," res) {\n"],[1,"    "],[0,"\n    con"]],"start1":155,"start2":155,"length1":16,"length2":20},{"diffs":[[0,"og(\"API "],[1,"get "],[0,"wikipedi"]],"start1":181,"start2":181,"length1":16,"length2":20},{"diffs":[[0,"ikipedia"],[1," article"],[0,"\");\n    "]],"start1":194,"start2":194,"length1":16,"length2":24},{"diffs":[[0,"var "],[-1,"query = req.body.article.title"],[1,"data = querystring.stringify({\n        'email' : 'antb59@gmail.com',\n        'notification[from_screen_name]': req.body.notification.title,\n        'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg'\n    })"],[0,";\n\n "]],"start1":246,"start2":246,"length1":38,"length2":296},{"diffs":[[0,"    "],[-1,"query: query"],[1,"host: 'boxcar.io'"],[0,",\n  "]],"start1":565,"start2":565,"length1":20,"length2":25},{"diffs":[[0,"    "],[-1,"form"],[1,"port: 80,\n        p"],[0,"at"],[1,"h"],[0,": "],[-1,"\"html\",\n        summaryOnly: true"],[1,"'/devices/providers/shNKXYXvXQKdqnvh19w/notifications',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }"],[0,"\n    };\n"],[1,"    "],[0,"\n    "],[-1,"wikipedia.searchArticle(options, function(err, htmlWikiText) {\n        if (err) {\n"],[1,"try {\n        var httpreq = http.request(options, function(res) {\n            res.setEncoding('utf8');\n            res.on('data', function (chunk) {\n    "],[0,"    "]],"start1":592,"start2":592,"length1":144,"length2":429},{"diffs":[[0,"og(\""],[-1,"Err "],[1,"body"],[0,": \" + "],[-1,"err.message);\n    "],[1,"chunk);\n            });\n        });\n        httpreq.write(data);\n        httpreq.end();\n"],[0,"    "]],"start1":1038,"start2":1038,"length1":36,"length2":106},{"diffs":[[0,"    "],[-1,"    "],[0,"status: "],[-1,"5"],[1,"2"],[0,"00,\n"]],"start1":1167,"start2":1167,"length1":21,"length2":17},{"diffs":[[0,"    "],[-1,"    body: 'Error while getting wikipedia article: ' + err.message"],[1,"message : 'Push notification sent'"],[0,"\n   "]],"start1":1192,"start2":1192,"length1":73,"length2":42},{"diffs":[[0,"    "],[1,"});\n"],[0,"    }"],[-1,");\n        }\n"],[1,"\n    catch(err) {\n        console.log(\"Err : \" + err.message);\n "],[0,"    "]],"start1":1235,"start2":1235,"length1":26,"length2":81},{"diffs":[[0,"        status: "],[-1,"2"],[1,"5"],[0,"00,\n            "]],"start1":1335,"start2":1335,"length1":33,"length2":33},{"diffs":[[0,"sage"],[1," "],[0,": "],[-1,"htmlWikiText"],[1,"'Error while sending push notification: ' + err.message"],[0,"\n   "]],"start1":1371,"start2":1371,"length1":22,"length2":66},{"diffs":[[0,");\n    }"],[-1,");"],[0,"\n\n};"]],"start1":1443,"start2":1443,"length1":14,"length2":12}]],"length":1455,"saved":false}
{"ts":1379324990043,"patch":[[{"diffs":[[0,"    "],[-1,"host: 'boxcar.io"],[1,"'http://en.wikipedia.org/w/api.php?format=json&action=query&titles=Main%20Page&prop=revisions&rvprop=content'\n        host: 'fr.wikipedia.org"],[0,"',\n "]],"start1":565,"start2":565,"length1":24,"length2":149},{"diffs":[[0,"d: '"],[-1,"POS"],[1,"GE"],[0,"T',\n"]],"start1":814,"start2":814,"length1":11,"length2":10}]],"length":1579,"saved":false}
{"ts":1379325117893,"patch":[[{"diffs":[[0,"   '"],[-1,"email' : 'antb59@gmail.com"],[1,"format' : 'json"],[0,"',\n "]],"start1":286,"start2":286,"length1":34,"length2":23},{"diffs":[[0,"h: '"],[-1,"/devices/providers/shNKXYXvXQKdqnvh19w/notifications"],[1,"w/api.php"],[0,"',\n "]],"start1":731,"start2":731,"length1":60,"length2":17}]],"length":1525,"saved":false}
{"ts":1379331233860,"patch":[[{"diffs":[[0,");\n\n"],[1,"\n"],[0,"    var "],[-1,"data = querystring.stringify({\n        'format' : 'json',\n        'notification[from_screen_name]': req.body.notification.title,\n        'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg'\n    });\n\n    var options = {\n        'http://en.wikipedia.org/"],[1,"options = {\n        host: 'fr.wikipedia.org',\n        port: 80,\n        path: '"],[0,"w/ap"]],"start1":238,"start2":238,"length1":349,"length2":96},{"diffs":[[0,"ent'"],[-1,"\n        host: 'fr.wikipedia.org',\n        port: 80,\n        path: 'w/api.php'"],[0,",\n  "]],"start1":410,"start2":410,"length1":86,"length2":8}]],"length":1194,"saved":false}
{"ts":1379331238931,"patch":[[{"diffs":[[0,"T',\n"],[-1,"        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }\n"],[0,"    "]],"start1":435,"start2":435,"length1":156,"length2":8}]],"length":1046,"saved":false}
{"ts":1379331240363,"patch":[[{"diffs":[[0,"d: 'GET'"],[-1,","],[0,"\n    };\n"]],"start1":429,"start2":429,"length1":17,"length2":16}]],"length":1045,"saved":false}
{"ts":1379331377891,"patch":[[{"diffs":[[0,");\n\n"],[-1,"\n"],[0,"    var "],[-1,"options = {\n        host: 'fr.wikipedia.org',\n        port: 80,\n        path: 'w/api.php?format=json&action=query&titles=Main%20Page&prop=revisions&rvprop=content',\n        method: 'GET'"],[1,"data = querystring.stringify({\n        format : 'json',\n        action: 'query',\n        'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg'\n    });\n\n    var options = {\n        'http://en.wikipedia.org/w/api.php?format=json&action=query&titles=Main%20Page&prop=revisions&rvprop=content'\n        host: 'fr.wikipedia.org',\n        port: 80,\n        path: 'w/api.php',\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }"],[0,"\n   "]],"start1":238,"start2":238,"length1":203,"length2":635}]],"length":1477,"saved":false}
{"ts":1379331437520,"patch":[[{"diffs":[[0,"    "],[-1,"'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg"],[1,"titles: req.body.article.title,\n        prop: 'revisions',\n        rvprop: 'content"],[0,"'\n  "]],"start1":335,"start2":335,"length1":140,"length2":91}]],"length":1428,"saved":false}
{"ts":1379331444499,"patch":[[{"diffs":[[0,"    var "],[-1,"data"],[1,"queryParam"],[0," = query"]],"start1":242,"start2":242,"length1":20,"length2":26}]],"length":1434,"saved":false}
{"ts":1379331471168,"patch":[[{"diffs":[[0,"/api.php"],[-1,"'"],[1,"?' + queryParam"],[0,",\n      "]],"start1":645,"start2":645,"length1":17,"length2":31}]],"length":1448,"saved":false}
{"ts":1379331474273,"patch":[[{"diffs":[[0,"T',\n"],[-1,"        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }\n"],[0,"    "]],"start1":689,"start2":689,"length1":156,"length2":8}]],"length":1300,"saved":false}
{"ts":1379331475207,"patch":[[{"diffs":[[0,"= {\n"],[-1,"        'http://en.wikipedia.org/w/api.php?format=json&action=query&titles=Main%20Page&prop=revisions&rvprop=content'\n"],[0,"    "]],"start1":455,"start2":455,"length1":126,"length2":8}]],"length":1182,"saved":false}
{"ts":1379331488073,"patch":[[{"diffs":[[0,"});\n"],[-1,"        httpreq.write(data);\n"],[0,"    "]],"start1":811,"start2":811,"length1":37,"length2":8}]],"length":1153,"saved":false}
{"ts":1379331589209,"patch":[[{"diffs":[[0," : '"],[-1,"Push notification"],[1,"Get Wikipedia artile"],[0," sen"]],"start1":901,"start2":901,"length1":25,"length2":28}]],"length":1156,"saved":false}
{"ts":1379331591124,"patch":[[{"diffs":[[0,"dia arti"],[1,"c"],[0,"le sent'"]],"start1":915,"start2":915,"length1":16,"length2":17}]],"length":1157,"saved":false}
{"ts":1379331613849,"patch":[[{"diffs":[[0," : 'Get "],[-1,"W"],[1,"w"],[0,"ikipedia"]],"start1":901,"start2":901,"length1":17,"length2":17},{"diffs":[[0,"ile "],[-1,"sending push notification"],[1,"gettting wikipedia article"],[0,": ' "]],"start1":1089,"start2":1089,"length1":33,"length2":34}]],"length":1158,"saved":false}
{"ts":1379331682825,"patch":[[{"diffs":[[0,".end();\n        "],[1,"/*"],[0,"res.json({\n     "]],"start1":830,"start2":830,"length1":32,"length2":34},{"diffs":[[0,"\n        });"],[1,"*/"],[0,"\n    }\n    c"]],"start1":934,"start2":934,"length1":24,"length2":26}]],"length":1162,"saved":false}
{"ts":1379331909936,"patch":[[{"diffs":[[0," path: '"],[1,"/"],[0,"w/api.ph"]],"start1":518,"start2":518,"length1":16,"length2":17}]],"length":1163,"saved":false}
{"ts":1379332089071,"patch":[[{"diffs":[[0,"p: 'content'"],[1,",\n        redirects: 'true'"],[0,"\n    });\n\n  "]],"start1":417,"start2":417,"length1":24,"length2":51}]],"length":1190,"saved":false}
{"ts":1379332165572,"patch":[[{"diffs":[[0,"    "],[-1,"});\n        });\n        httpreq.end();\n        /*res.json({\n"],[1,"    res.json({\n        "],[0,"    "]],"start1":823,"start2":823,"length1":68,"length2":31},{"diffs":[[0,"tatus: 200,\n"],[1,"        "],[0,"            "]],"start1":863,"start2":863,"length1":24,"length2":32},{"diffs":[[0,"e sent'\n"],[1,"        "],[0,"        "]],"start1":926,"start2":926,"length1":16,"length2":24},{"diffs":[[0," });"],[-1,"*/"],[1,"\n            });\n        });\n        httpreq.end();\n        "],[0,"\n   "]],"start1":949,"start2":949,"length1":10,"length2":68}]],"length":1227,"saved":false}
{"ts":1379332185160,"patch":[[{"diffs":[[0,"e : "],[-1,"'Get wikipedia article sent'"],[1,"chunk"],[0,"\n   "]],"start1":901,"start2":901,"length1":36,"length2":13}]],"length":1204,"saved":false}
{"ts":1379332187932,"patch":[[{"diffs":[[0," message"],[-1," "],[0,": chunk\n"]],"start1":894,"start2":894,"length1":17,"length2":16}]],"length":1203,"saved":false}
