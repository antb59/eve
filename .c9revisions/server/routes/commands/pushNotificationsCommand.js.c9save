{"ts":1379334313221,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var querystring = require('querystring'),\n    http = require('http');\n\nexports.pushNotification = function(req, res){\n\n    console.log(\"API push notification\");\n    console.log(req.body);\n\n    var data = querystring.stringify({\n        'email' : 'antb59@gmail.com',\n        'notification[from_screen_name]': req.body.notification.title,\n        'notification[message]': req.body.notification.message,\n        'notification[icon_url]': 'http://eve.antb59.c9.io/img/eve_small.jpg'\n    });\n\n    var options = {\n        host: 'boxcar.io',\n        port: 80,\n        path: '/devices/providers/shNKXYXvXQKdqnvh19w/notifications',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Content-Length': Buffer.byteLength(data)\n        }\n    };\n    \n    try {\n        var httpreq = http.request(options, function(res) {\n            res.setEncoding('utf8');\n            res.on('data', function (chunk) {\n                console.log(\"body: \" + chunk);\n            });\n        });\n        httpreq.write(data);\n        httpreq.end();\n        res.json({\n            status: 200,\n            message : 'Push notification sent'\n        });\n    }\n    catch(err) {\n        console.log(\"Err : \" + err.message);\n         res.json({\n            status: 500,\n            message : 'Error while sending push notification: ' + err.message\n        });\n    }\n};"]],"start1":0,"start2":0,"length1":0,"length2":1401}]],"length":1401}
